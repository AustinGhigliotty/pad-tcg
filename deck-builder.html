<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Deck Builder - PAD Card Game</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="deck-builder-styling.css">
</head>
<body>
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script>
    var cardList;
    $.getJSON("./cardList", callbackFuncWithData);

    function callbackFuncWithData(data) {
        cardList = data;
    }
    // alert("Game is starting!");
</script>
<script src="deck-builder.js"></script>
<script>
	function getCreatedDeck() {
	    var deckName = localStorage.getItem('_deckName');
		var createdDeck = localStorage.getItem('_createdDeck-' + deckName);
        // var createdDeck = localStorage[0];
		if (!createdDeck) {return false;}
        // localStorage.removeItem('_createdDeck');
        createdDeck = atob(createdDeck);
        createdDeck = JSON.parse(createdDeck);
        var createdDeckName = Object.keys(createdDeck)[0];
        var createdDeckValues = Object.values(createdDeck)[0];
        savedDecks[createdDeckName] = createdDeckValues;
        return true;
    }
	getCreatedDeck();
</script>

<div class="deck-row-container">
	<div class="row deck-list">

	</div>
</div>

<br>

<a href="deck-builder-page.html"><button>Make new deck</button></a>

<script>
	function deckListUpdate() {
        $('.deck-list').empty();
        for (let i = 0; i < Object.keys(savedDecks).length; i++) {
            if (Object.values(savedDecks)[i].length < 40) {
                $('.deck-list').append('<div class="col-3 individual-deck"><img src="cards/' + Object.values(savedDecks)[i][0] + '.jpg"><p style="color: yellow">' + Object.keys(savedDecks)[i] + ' !</p><p>(Missing ' + (40 - Object.values(savedDecks)[i].length) + ' cards)</p></div>');
            } else if (Object.values(savedDecks)[i].length > 60) {
                $('.deck-list').append('<div class="col-3 individual-deck"><img src="cards/' + Object.values(savedDecks)[i][0] + '.jpg"><p style="color: yellow">' + Object.keys(savedDecks)[i] + ' !</p><p>(' + (Object.values(savedDecks)[i].length - 60) + ' too many cards)</p></div>');
			} else {
                $('.deck-list').append('<div class="col-3 individual-deck"><img src="cards/' + Object.values(savedDecks)[i][0] + '.jpg"><p>' + Object.keys(savedDecks)[i] + '</p><p>(' + Object.values(savedDecks)[i].length + ' cards)</p></div>');
            }
        }
    }
    deckListUpdate();

</script>
</body>
</html>